import { sync as spawnSync } from "cross-spawn";
const defaultOptions = {
    logStdErrOnError: true,
    throwOnError: true,
};
export const spawnSafeSync = (command, args, options) => {
    const mergedOptions = Object.assign({}, defaultOptions, options);
    const result = spawnSync(command, args, options);
    if (result.error || result.status !== 0) {
        if (mergedOptions.logStdErrOnError) {
            if (result.stderr) {
                console.log(result.stderr.toString());
            }
            else if (result.error) {
                console.log(result.error);
            }
        }
        if (mergedOptions.throwOnError) {
            throw result;
        }
    }
    return result;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Bhd25TYWZlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL3NwYXduU2FmZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxJQUFJLFNBQVMsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQVMvQyxNQUFNLGNBQWMsR0FBcUI7SUFDdkMsZ0JBQWdCLEVBQUUsSUFBSTtJQUN0QixZQUFZLEVBQUUsSUFBSTtDQUNuQixDQUFBO0FBRUQsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFHLENBQzNCLE9BQWUsRUFDZixJQUFlLEVBQ2YsT0FBMEIsRUFDMUIsRUFBRTtJQUNGLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLGNBQWMsRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUNoRSxNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUNoRCxJQUFJLE1BQU0sQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDdkMsSUFBSSxhQUFhLENBQUMsZ0JBQWdCLEVBQUU7WUFDbEMsSUFBSSxNQUFNLENBQUMsTUFBTSxFQUFFO2dCQUNqQixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQTthQUN0QztpQkFBTSxJQUFJLE1BQU0sQ0FBQyxLQUFLLEVBQUU7Z0JBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO2FBQzFCO1NBQ0Y7UUFDRCxJQUFJLGFBQWEsQ0FBQyxZQUFZLEVBQUU7WUFDOUIsTUFBTSxNQUFNLENBQUE7U0FDYjtLQUNGO0lBQ0QsT0FBTyxNQUFNLENBQUE7QUFDZixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzeW5jIGFzIHNwYXduU3luYyB9IGZyb20gXCJjcm9zcy1zcGF3blwiXG5pbXBvcnQgeyBTcGF3bk9wdGlvbnMgfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiXG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Bhd25TYWZlT3B0aW9ucyBleHRlbmRzIFNwYXduT3B0aW9ucyB7XG4gIHRocm93T25FcnJvcj86IGJvb2xlYW5cbiAgbG9nU3RkRXJyT25FcnJvcj86IGJvb2xlYW5cbiAgbWF4QnVmZmVyPzogbnVtYmVyXG59XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBTcGF3blNhZmVPcHRpb25zID0ge1xuICBsb2dTdGRFcnJPbkVycm9yOiB0cnVlLFxuICB0aHJvd09uRXJyb3I6IHRydWUsXG59XG5cbmV4cG9ydCBjb25zdCBzcGF3blNhZmVTeW5jID0gKFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIGFyZ3M/OiBzdHJpbmdbXSxcbiAgb3B0aW9ucz86IFNwYXduU2FmZU9wdGlvbnMsXG4pID0+IHtcbiAgY29uc3QgbWVyZ2VkT3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKVxuICBjb25zdCByZXN1bHQgPSBzcGF3blN5bmMoY29tbWFuZCwgYXJncywgb3B0aW9ucylcbiAgaWYgKHJlc3VsdC5lcnJvciB8fCByZXN1bHQuc3RhdHVzICE9PSAwKSB7XG4gICAgaWYgKG1lcmdlZE9wdGlvbnMubG9nU3RkRXJyT25FcnJvcikge1xuICAgICAgaWYgKHJlc3VsdC5zdGRlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LnN0ZGVyci50b1N0cmluZygpKVxuICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWVyZ2VkT3B0aW9ucy50aHJvd09uRXJyb3IpIHtcbiAgICAgIHRocm93IHJlc3VsdFxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0XG59XG4iXX0=